{"ast":null,"code":"import axios from 'axios';\nconst resources = {};\nconst makeRequestCreator = () => {\n  let cancel;\n  return async query => {\n    if (cancel) {\n      // Cancel the previous request before making a new request\n      cancel.cancel();\n    }\n    // Create a new CancelToken\n    cancel = axios.CancelToken.source();\n    try {\n      if (resources[query]) {\n        // Return result if it exists\n        return resources[query];\n      }\n      const res = await axios(query, {\n        cancelToken: cancel.token\n      });\n      const result = res.data.results;\n      // Store response\n      resources[query] = result;\n      return result;\n    } catch (error) {\n      if (axios.isCancel(error)) {\n        // Handle if request was cancelled\n        console.log('Request canceled', error.message);\n      } else {\n        // Handle usual errors\n        console.log('Something went wrong: ', error.message);\n      }\n    }\n  };\n};\nexport const search = makeRequestCreator();","map":{"version":3,"names":["axios","resources","makeRequestCreator","cancel","query","CancelToken","source","res","cancelToken","token","result","data","results","error","isCancel","console","log","message","search"],"sources":["/Users/allisonchen/Desktop/filmdiary/client/src/components/search/utils.js"],"sourcesContent":["import axios from 'axios';\n\nconst resources = {};\n\nconst makeRequestCreator = () => {\n\tlet cancel;\n  \n\treturn async query => {\n\t  if (cancel) {\n\t\t// Cancel the previous request before making a new request\n\t\tcancel.cancel();\n\t  }\n\t  // Create a new CancelToken\n\t  cancel = axios.CancelToken.source();\n\t  try {\n\t\tif (resources[query]) {\n\t\t  // Return result if it exists\n\t\t  return resources[query];\n\t\t}\n\t\tconst res = await axios(query, { cancelToken: cancel.token });\n  \n\t\tconst result = res.data.results;\n\t\t// Store response\n\t\tresources[query] = result;\n  \n\t\treturn result;\n\t  } catch (error) {\n\t\tif (axios.isCancel(error)) {\n\t\t  // Handle if request was cancelled\n\t\t  console.log('Request canceled', error.message);\n\t\t} else {\n\t\t  // Handle usual errors\n\t\t  console.log('Something went wrong: ', error.message);\n\t\t}\n\t  }\n\t};\n  };\n  \n  export const search = makeRequestCreator()"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,MAAMC,SAAS,GAAG,CAAC,CAAC;AAEpB,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAChC,IAAIC,MAAM;EAEV,OAAO,MAAMC,KAAK,IAAI;IACpB,IAAID,MAAM,EAAE;MACb;MACAA,MAAM,CAACA,MAAM,EAAE;IACd;IACA;IACAA,MAAM,GAAGH,KAAK,CAACK,WAAW,CAACC,MAAM,EAAE;IACnC,IAAI;MACL,IAAIL,SAAS,CAACG,KAAK,CAAC,EAAE;QACpB;QACA,OAAOH,SAAS,CAACG,KAAK,CAAC;MACzB;MACA,MAAMG,GAAG,GAAG,MAAMP,KAAK,CAACI,KAAK,EAAE;QAAEI,WAAW,EAAEL,MAAM,CAACM;MAAM,CAAC,CAAC;MAE7D,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,OAAO;MAC/B;MACAX,SAAS,CAACG,KAAK,CAAC,GAAGM,MAAM;MAEzB,OAAOA,MAAM;IACZ,CAAC,CAAC,OAAOG,KAAK,EAAE;MACjB,IAAIb,KAAK,CAACc,QAAQ,CAACD,KAAK,CAAC,EAAE;QACzB;QACAE,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,KAAK,CAACI,OAAO,CAAC;MAChD,CAAC,MAAM;QACL;QACAF,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,KAAK,CAACI,OAAO,CAAC;MACtD;IACC;EACF,CAAC;AACA,CAAC;AAED,OAAO,MAAMC,MAAM,GAAGhB,kBAAkB,EAAE"},"metadata":{},"sourceType":"module"}