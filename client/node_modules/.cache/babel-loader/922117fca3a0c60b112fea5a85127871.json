{"ast":null,"code":"var _jsxFileName = \"/Users/allisonchen/Desktop/filmdiary/client/src/components/favButton/favButton.js\";\nimport { Component } from \"react\";\nimport axios from 'axios';\nimport OverlayButton from '../overlayButton/overlayButton';\nimport { Button } from 'react-bootstrap';\n// import { withAuth0 } from \"@auth0/auth0-react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass FavButton extends Component {\n  constructor(props) {\n    super(props);\n    this.componentDidMount = () => {\n      this.setState({\n        ID: this.props.id,\n        isFav: this.props.isFav\n      });\n    };\n    this.favHandler = () => {\n      if (!this.state.isFav) {\n        this.addToFav();\n      } else {\n        this.removeFromFav();\n      }\n    };\n    this.addToFav = event => {\n      const {\n        user\n      } = this.props.auth0;\n      const userID = user.sub;\n      const movieID = this.props.id;\n      axios.post(this.state.server + `/api/users/addMovie/${userID}`, {\n        \"movieID\": movieID\n      }).then(this.setState({\n        isFav: true\n      }));\n    };\n    this.removeFromFav = event => {\n      const {\n        user\n      } = this.props.auth0;\n      const userID = user.sub;\n      const movieID = this.props.id;\n      axios.post(this.state.server + `/api/users/removeMovie/${userID}`, {\n        \"movieID\": movieID\n      }).then(this.setState({\n        isFav: false\n      }));\n    };\n    this.render = () => {\n      const {\n        isAuthenticated\n      } = this.props.auth0;\n      let myVar, myText;\n      if (!this.state.isFav) {\n        myText = 'Favourite';\n        myVar = 'secondary';\n      } else {\n        myText = 'Unfavourite';\n        myVar = 'success';\n      }\n      if (isAuthenticated) {\n        return /*#__PURE__*/_jsxDEV(Button, {\n          variant: myVar,\n          className: \"tile-btn\",\n          size: \"sm\",\n          onClick: this.favHandler,\n          children: myText\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 17\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(OverlayButton, {\n          variant: myVar,\n          className: \"tile-btn\",\n          size: \"sm\",\n          text: myText,\n          tip: \"Please log in to favourite a movie!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 17\n        }, this);\n      }\n    };\n    this.state = {\n      isFav: false,\n      server: process.env.REACT_APP_SERVER_URL || ''\n    };\n  }\n}\nexport default FavButton;","map":{"version":3,"names":["Component","axios","OverlayButton","Button","jsxDEV","_jsxDEV","FavButton","constructor","props","componentDidMount","setState","ID","id","isFav","favHandler","state","addToFav","removeFromFav","event","user","auth0","userID","sub","movieID","post","server","then","render","isAuthenticated","myVar","myText","variant","className","size","onClick","children","fileName","_jsxFileName","lineNumber","columnNumber","text","tip","process","env","REACT_APP_SERVER_URL"],"sources":["/Users/allisonchen/Desktop/filmdiary/client/src/components/favButton/favButton.js"],"sourcesContent":["import { Component } from \"react\";\nimport axios from 'axios'\nimport OverlayButton from '../overlayButton/overlayButton'\nimport { Button } from 'react-bootstrap';\n// import { withAuth0 } from \"@auth0/auth0-react\";\n\nclass FavButton extends Component{\n\n    constructor(props){\n        super(props)\n        this.state={\n            isFav: false,\n            server: process.env.REACT_APP_SERVER_URL || ''\n        }\n    }\n\n    componentDidMount = () =>{\n        this.setState({\n            ID: this.props.id,\n            isFav: this.props.isFav\n        })\n    }\n\n    favHandler = () => {\n        if (!this.state.isFav){\n            this.addToFav()\n        }\n        else{\n            this.removeFromFav()\n        }\n    }\n\n    addToFav = (event) => { \n        const { user } = this.props.auth0\n        const userID = user.sub\n        const movieID = this.props.id\n\n        axios.post(this.state.server+`/api/users/addMovie/${userID}`, {\"movieID\": movieID})\n            .then(this.setState({isFav: true}));\n    }\n\n    removeFromFav = (event) => { \n        const { user } = this.props.auth0\n        const userID = user.sub\n        const movieID = this.props.id\n\n        axios.post(this.state.server+`/api/users/removeMovie/${userID}`, {\"movieID\": movieID})\n            .then(this.setState({isFav: false}));\n    }\n\n    \n    render = () => {\n        const { isAuthenticated } = this.props.auth0\n        let myVar, myText\n\n        if (!this.state.isFav){\n            myText = 'Favourite'\n            myVar = 'secondary'\n        }\n        else{\n            myText= 'Unfavourite'\n            myVar = 'success'\n        }\n        \n        if (isAuthenticated){\n            return(\n                <Button variant={myVar} className='tile-btn' size=\"sm\" onClick={this.favHandler} >{myText}</Button>\n            )\n        }\n        else{\n            return(\n                <OverlayButton variant={myVar} className='tile-btn' size=\"sm\" text={myText} tip=\"Please log in to favourite a movie!\"/>\n            )\n        }\n    }\n}\n\nexport default FavButton"],"mappings":"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"},"metadata":{},"sourceType":"module"}