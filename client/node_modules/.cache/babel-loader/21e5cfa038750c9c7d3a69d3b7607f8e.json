{"ast":null,"code":"import axios from \"axios\";\nexport const truncStr = (string, limit) => {\n  return string.length > limit ? string.trim().substring(0, limit - 3).trim() + \"...\" : string;\n};\nconst resources = {};\nconst makeRequestCreator = () => {\n  let cancel;\n  return async query => {\n    if (cancel) {\n      // Cancel the previous request before making a new request\n      cancel.cancel();\n    }\n    // Create a new CancelToken\n    cancel = axios.CancelToken.source();\n    try {\n      if (resources[query]) {\n        // Return result if it exists\n        return resources[query];\n      }\n      const res = await axios(query, {\n        cancelToken: cancel.token\n      });\n      const result = res.data.results;\n      // Store response\n      resources[query] = result;\n      return result;\n    } catch (error) {\n      if (axios.isCancel(error)) {\n        // Handle if request was cancelled\n        console.log(\"Request canceled\", error.message);\n      } else {\n        // Handle usual errors\n        console.log(\"Something went wrong: \", error.message);\n      }\n    }\n  };\n};\nexport const search = makeRequestCreator();","map":{"version":3,"names":["axios","truncStr","string","limit","length","trim","substring","resources","makeRequestCreator","cancel","query","CancelToken","source","res","cancelToken","token","result","data","results","error","isCancel","console","log","message","search"],"sources":["/Users/annajiang/Desktop/fuck/client/src/components/searchList/utils.js"],"sourcesContent":["import axios from \"axios\";\n\nexport const truncStr = (string, limit) => {\n  return string.length > limit\n    ? string\n        .trim()\n        .substring(0, limit - 3)\n        .trim() + \"...\"\n    : string;\n};\n\nconst resources = {};\n\nconst makeRequestCreator = () => {\n  let cancel;\n\n  return async query => {\n    if (cancel) {\n      // Cancel the previous request before making a new request\n      cancel.cancel();\n    }\n    // Create a new CancelToken\n    cancel = axios.CancelToken.source();\n    try {\n      if (resources[query]) {\n        // Return result if it exists\n        return resources[query];\n      }\n      const res = await axios(query, { cancelToken: cancel.token });\n\n      const result = res.data.results;\n      // Store response\n      resources[query] = result;\n\n      return result;\n    } catch (error) {\n      if (axios.isCancel(error)) {\n        // Handle if request was cancelled\n        console.log(\"Request canceled\", error.message);\n      } else {\n        // Handle usual errors\n        console.log(\"Something went wrong: \", error.message);\n      }\n    }\n  };\n};\n\nexport const search = makeRequestCreator();\n"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AAEzB,OAAO,MAAMC,QAAQ,GAAGA,CAACC,MAAM,EAAEC,KAAK,KAAK;EACzC,OAAOD,MAAM,CAACE,MAAM,GAAGD,KAAK,GACxBD,MAAM,CACHG,IAAI,EAAE,CACNC,SAAS,CAAC,CAAC,EAAEH,KAAK,GAAG,CAAC,CAAC,CACvBE,IAAI,EAAE,GAAG,KAAK,GACjBH,MAAM;AACZ,CAAC;AAED,MAAMK,SAAS,GAAG,CAAC,CAAC;AAEpB,MAAMC,kBAAkB,GAAGA,CAAA,KAAM;EAC/B,IAAIC,MAAM;EAEV,OAAO,MAAMC,KAAK,IAAI;IACpB,IAAID,MAAM,EAAE;MACV;MACAA,MAAM,CAACA,MAAM,EAAE;IACjB;IACA;IACAA,MAAM,GAAGT,KAAK,CAACW,WAAW,CAACC,MAAM,EAAE;IACnC,IAAI;MACF,IAAIL,SAAS,CAACG,KAAK,CAAC,EAAE;QACpB;QACA,OAAOH,SAAS,CAACG,KAAK,CAAC;MACzB;MACA,MAAMG,GAAG,GAAG,MAAMb,KAAK,CAACU,KAAK,EAAE;QAAEI,WAAW,EAAEL,MAAM,CAACM;MAAM,CAAC,CAAC;MAE7D,MAAMC,MAAM,GAAGH,GAAG,CAACI,IAAI,CAACC,OAAO;MAC/B;MACAX,SAAS,CAACG,KAAK,CAAC,GAAGM,MAAM;MAEzB,OAAOA,MAAM;IACf,CAAC,CAAC,OAAOG,KAAK,EAAE;MACd,IAAInB,KAAK,CAACoB,QAAQ,CAACD,KAAK,CAAC,EAAE;QACzB;QACAE,OAAO,CAACC,GAAG,CAAC,kBAAkB,EAAEH,KAAK,CAACI,OAAO,CAAC;MAChD,CAAC,MAAM;QACL;QACAF,OAAO,CAACC,GAAG,CAAC,wBAAwB,EAAEH,KAAK,CAACI,OAAO,CAAC;MACtD;IACF;EACF,CAAC;AACH,CAAC;AAED,OAAO,MAAMC,MAAM,GAAGhB,kBAAkB,EAAE"},"metadata":{},"sourceType":"module"}