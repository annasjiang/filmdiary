{"ast":null,"code":"var _jsxFileName = \"/Users/allisonchen/Desktop/filmdiary/client/src/components/search/search.js\";\nimport React, { Component, useState } from 'react';\nimport axios from 'axios';\nimport './search.css';\nimport Grid from '../grid/grid';\nimport LoadMore from '../loadMore/loadMore';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Search extends Component {\n  constructor(props) {\n    const [searchValue, setSearchValue] = useState(\"\");\n    const handleSearchInputChanges = e => {\n      setSearchValue(e.target.value);\n    };\n    const resetInputField = () => {\n      setSearchValue(\"\");\n    };\n    const callSearchFunction = e => {\n      e.preventDefault();\n      props.search(searchValue);\n      resetInputField();\n    };\n    super(props);\n    this.preformSearch = (searchTerm, pageNum) => {\n      // https://developers.themoviedb.org/3/\n\n      this.setState({\n        noResults: false\n      });\n      this.setState({\n        loading: true\n      });\n      const URL = this.state.server + `/api/movies/search/${searchTerm}/${pageNum}`;\n      axios.get(URL).then(response => {\n        this.setState({\n          movies: response.data,\n          pageNum: this.state.pageNum + 1,\n          loading: false\n        });\n        if (response.data.length === 0 && searchTerm !== \"\") {\n          this.setState({\n            noResults: true\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n    this.appendSearch = (searchTerm, pageNum) => {\n      // https://developers.themoviedb.org/3/\n\n      this.setState({\n        noResults: false\n      });\n      this.setState({\n        loading: true\n      });\n      const URL = this.state.server + `/api/movies/search/${searchTerm}/${pageNum}`;\n      axios.get(URL).then(response => {\n        response.data.forEach(element => {\n          this.state.movies.push(element);\n        });\n        this.setState({\n          loading: false\n        });\n        if (response.data.length === 0 && searchTerm !== \"\") {\n          this.setState({\n            noResults: true\n          });\n        }\n      }).catch(err => {\n        console.log(err);\n      });\n    };\n    this.changeHandler = event => {\n      this.setState({\n        currentPage: 1,\n        searchTerm: event.target.value\n      }, () => {\n        if (this.state.searchTerm !== \"\") {\n          this.preformSearch(this.state.searchTerm, 1);\n        }\n      });\n    };\n    this.clickHandler = () => {\n      this.setState({\n        currentPage: this.state.currentPage + 1\n      }, () => {\n        this.appendSearch(this.state.searchTerm, this.state.currentPage);\n      });\n    };\n    this.state = {\n      movies: [],\n      searchTerm: \"\",\n      currentPage: 1,\n      loading: false,\n      noResults: false,\n      server: process.env.REACT_APP_SERVER_URL || ''\n    };\n  }\n  render() {\n    if (this.state.noResults) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"search\",\n          placeholder: \"Search for a movie\",\n          onChange: this.changeHandler\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(Grid, {\n          movies: this.state.movies\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"alert alert-primary\",\n          role: \"alert\",\n          children: \"No results found\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 17\n      }, this);\n    } else {\n      if (this.state.loading || this.state.searchTerm === \"\") {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"search\",\n            placeholder: \"Search for a movie\",\n            onChange: this.changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 118,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 119,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            movies: this.state.movies\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 21\n        }, this);\n      } else {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"container-lg\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"search\",\n            placeholder: \"Search for a movie\",\n            onChange: this.changeHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 127,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 128,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(Grid, {\n            movies: this.state.movies\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 129,\n            columnNumber: 25\n          }, this), /*#__PURE__*/_jsxDEV(LoadMore, {\n            text: \"Load More\",\n            onClick: this.clickHandler\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 130,\n            columnNumber: 25\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this);\n      }\n    }\n  }\n}\nexport default Search;","map":{"version":3,"names":["React","Component","useState","axios","Grid","LoadMore","jsxDEV","_jsxDEV","Search","constructor","props","searchValue","setSearchValue","handleSearchInputChanges","e","target","value","resetInputField","callSearchFunction","preventDefault","search","preformSearch","searchTerm","pageNum","setState","noResults","loading","URL","state","server","get","then","response","movies","data","length","catch","err","console","log","appendSearch","forEach","element","push","changeHandler","event","currentPage","clickHandler","process","env","REACT_APP_SERVER_URL","render","className","children","type","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","role","text","onClick"],"sources":["/Users/allisonchen/Desktop/filmdiary/client/src/components/search/search.js"],"sourcesContent":["import React, { Component, useState } from 'react';\nimport axios from 'axios'\nimport './search.css'\nimport Grid from '../grid/grid'\nimport LoadMore from '../loadMore/loadMore'\n\n\nclass Search extends Component{\n\n    constructor(props){\n        const [searchValue, setSearchValue] = useState(\"\");\n            \n        const handleSearchInputChanges = (e) => {\n            setSearchValue(e.target.value);\n        }\n        \n        const resetInputField = () => {\n            setSearchValue(\"\")\n        }\n        \n        const callSearchFunction = (e) => {\n            e.preventDefault();\n            props.search(searchValue);\n            resetInputField();\n        }\n        \n        super(props)\n        this.state={\n            movies: [],\n            searchTerm: \"\",\n            currentPage: 1,\n            loading: false,\n            noResults: false,\n            server: process.env.REACT_APP_SERVER_URL || ''\n        }\n    }\n\n    preformSearch = (searchTerm, pageNum) =>{\n        // https://developers.themoviedb.org/3/\n\n        this.setState({noResults: false})\n        this.setState({loading: true})\n        const URL = this.state.server+`/api/movies/search/${searchTerm}/${pageNum}`\n        \n        axios.get(URL)\n        .then((response) => {\n            this.setState({\n                movies: response.data,\n                pageNum: this.state.pageNum+1,\n                loading: false\n            })\n\n            if (response.data.length === 0 && searchTerm !== \"\"){\n                this.setState({noResults: true})\n            }\n        })\n        .catch(err =>{\n            console.log(err)\n        });\n        \n    }\n\n    appendSearch = (searchTerm, pageNum) =>{\n        // https://developers.themoviedb.org/3/\n\n        this.setState({noResults: false})\n        this.setState({loading: true})\n\n        const URL = this.state.server+`/api/movies/search/${searchTerm}/${pageNum}`\n        \n        axios.get(URL)\n        .then((response) => {\n            response.data.forEach(element => {\n                this.state.movies.push(element)\n            });\n            this.setState({loading: false})\n\n            if (response.data.length === 0 && searchTerm !== \"\"){\n                this.setState({noResults: true})\n            }\n        })\n        .catch(err =>{\n            console.log(err)\n        });\n    }\n\n    changeHandler = (event) => {\n        this.setState({currentPage: 1, searchTerm: event.target.value}, ()=>{\n            if(this.state.searchTerm !== \"\"){\n                this.preformSearch(this.state.searchTerm, 1)\n            }   \n        })\n    }\n\n    clickHandler = () =>{\n        this.setState({currentPage: this.state.currentPage+1}, () =>{\n            this.appendSearch(this.state.searchTerm, this.state.currentPage)\n        })\n    }\n\n    render() {\n        if (this.state.noResults){\n            return(\n                <div className='container'>\n                    <input type=\"text\" className=\"search\" placeholder=\"Search for a movie\" onChange={this.changeHandler}/>\n                    <br/>\n                    <Grid movies={this.state.movies}/>\n                    <div className=\"alert alert-primary\" role=\"alert\">\n                        No results found\n                    </div>\n                </div>  \n            )\n        }\n        else{\n            if (this.state.loading || this.state.searchTerm===\"\"){\n                return(\n                    <div className='container-lg'>\n                        <input type=\"text\" className=\"search\" placeholder=\"Search for a movie\" onChange={this.changeHandler}/>\n                        <br/>\n                        <Grid movies={this.state.movies}/>\n                    </div>  \n                );\n            }\n            else{\n                return(\n                    <div className='container-lg'>\n                        <input type=\"text\" className=\"search\" placeholder=\"Search for a movie\" onChange={this.changeHandler}/>\n                        <br/>\n                        <Grid movies={this.state.movies}/>\n                        <LoadMore text='Load More' onClick={this.clickHandler}/>\n                    </div>  \n                );\n            }\n        }  \n    }\n}\n\nexport default Search"],"mappings":"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"},"metadata":{},"sourceType":"module"}