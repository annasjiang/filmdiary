{"ast":null,"code":"var _jsxFileName = \"/Users/annajiang/Desktop/fuck/client/src/components/dashboard.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./dashboard.css\";\nimport { auth, db, logout } from \"./firebase\";\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction Dashboard() {\n  _s();\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const navigate = useNavigate();\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user === null || user === void 0 ? void 0 : user.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setName(data.name);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    fetchUserName();\n  }, [user, loading]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"dashboard\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"dashboard__container\",\n      children: [\"Logged in as\", /*#__PURE__*/_jsxDEV(\"div\", {\n        children: name\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 32,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: user === null || user === void 0 ? void 0 : user.email\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 33,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dashboard__btn\",\n        onClick: logout,\n        children: \"Logout\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 34,\n        columnNumber: 10\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"dashboard__btn\",\n        onClick: event => window.location.href = '/diary',\n        children: \"view your film diary\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 10\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 30,\n      columnNumber: 8\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 29,\n    columnNumber: 5\n  }, this);\n}\n_s(Dashboard, \"uRyN7LcI9N/Hvip+FzXkom5uuDk=\", false, function () {\n  return [useAuthState, useNavigate];\n});\n_c = Dashboard;\nexport default Dashboard;\nvar _c;\n$RefreshReg$(_c, \"Dashboard\");","map":{"version":3,"names":["React","useEffect","useState","useAuthState","useNavigate","auth","db","logout","query","collection","getDocs","where","jsxDEV","_jsxDEV","Dashboard","_s","user","loading","error","name","setName","navigate","fetchUserName","q","uid","doc","data","docs","err","console","alert","className","children","fileName","_jsxFileName","lineNumber","columnNumber","email","onClick","event","window","location","href","_c","$RefreshReg$"],"sources":["/Users/annajiang/Desktop/fuck/client/src/components/dashboard.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport { useAuthState } from \"react-firebase-hooks/auth\";\nimport { useNavigate } from \"react-router-dom\";\nimport \"./dashboard.css\";\nimport { auth, db, logout } from \"./firebase\";\nimport { query, collection, getDocs, where } from \"firebase/firestore\";\n\nfunction Dashboard() {\n  const [user, loading, error] = useAuthState(auth);\n  const [name, setName] = useState(\"\");\n  const navigate = useNavigate();\n  const fetchUserName = async () => {\n    try {\n      const q = query(collection(db, \"users\"), where(\"uid\", \"==\", user?.uid));\n      const doc = await getDocs(q);\n      const data = doc.docs[0].data();\n      setName(data.name);\n    } catch (err) {\n      console.error(err);\n      alert(\"An error occured while fetching user data\");\n    }\n  };\n  useEffect(() => {\n    if (loading) return;\n    if (!user) return navigate(\"/\");\n    fetchUserName();\n  }, [user, loading]);\n  return (\n    <div className=\"dashboard\">\n       <div className=\"dashboard__container\">\n        Logged in as\n         <div>{name}</div>\n         <div>{user?.email}</div>\n         <button className=\"dashboard__btn\" onClick={logout}>\n          Logout\n         </button>\n\n         <button className=\"dashboard__btn\" onClick={event =>  window.location.href='/diary'}>\n          view your film diary\n         </button>\n       </div>\n     </div>\n  );\n}\nexport default Dashboard;"],"mappings":"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"},"metadata":{},"sourceType":"module"}